{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 28c8f3fcc312caddc3fb","webpack:///./app/components/base-page/index.js","webpack:///./app/components/base-component.js","webpack:///./app/lib/store.js","webpack:///./custom-page.js"],"names":[],"mappings":"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","file":"universal-embed-custom-page.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"UniversalEmbedCustomPage\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"UniversalEmbedCustomPage\"] = factory();\n\telse\n\t\troot[\"UniversalEmbedCustomPage\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmory imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmory exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tObject.defineProperty(exports, name, {\n \t\t\tconfigurable: false,\n \t\t\tenumerable: true,\n \t\t\tget: getter\n \t\t});\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 28c8f3fcc312caddc3fb","import BaseComponent from \"components/base-component\"\n\nexport default class BasePage extends BaseComponent {\n  static extend = function extend({fallback, id, label, template, templateVars} = {}) {\n    if (!id) throw new Error(\"UniversalEmbed: Page must have `id`\")\n    if (!label) throw new Error(\"UniversalEmbed: Page must have `label`\")\n\n    return class CustomPage extends BasePage {\n      static fallback = fallback || false;\n      static id = id;\n      static label = label;\n      static template = template || \"\";\n      static templateVars = templateVars || {}\n    }\n  };\n\n  compileTemplate() {\n    const {id, templateVars} = this.constructor\n\n    BaseComponent.prototype.compileTemplate.call(this, templateVars)\n\n    this.element.setAttribute(\"data-component\", `${id}-page`)\n    this.element.setAttribute(\"data-column\", \"\")\n    this.element.setAttribute(\"autofocus\", \"\")\n    this.element.className = `markdown instructions ${this.element.className || \"\"}`\n\n    return this.element\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/components/base-page/index.js","import {getStore} from \"lib/store\"\n\n// Ends with brackets e.g. [data-ref=\"foo[]\"]\nconst ARRAY_REF_PATTERN = /([a-zA-Z\\d]*)(\\[?\\]?)/\n\nexport default class BaseComponent {\n  static template = null;\n  static stylesheet = null;\n\n  element = null;\n  refs = {};\n  serializer = document.createElement(\"div\");\n\n  constructor(spec = {}) {\n    Object.assign(this, spec)\n\n    const {stylesheet} = this.constructor\n    const {document: iframeDocument} = getStore().iframe\n\n    if (stylesheet && !iframeDocument.head.contains(this.constructor.style)) {\n      // Common style tag has yet to be inserted in iframe.\n      const style = this.constructor.style = iframeDocument.createElement(\"style\")\n\n      style.innerHTML = stylesheet\n      iframeDocument.head.appendChild(style)\n    }\n  }\n\n  autofocus() {\n    const focusElement = this.element.querySelector(\"[autofocus]\")\n\n    if (focusElement) focusElement.focus()\n  }\n\n  // NOTE: Calling `updateRefs` multiple times from different tree depths may\n  // allow parents to inherit a grandchild.\n  updateRefs() {\n    const {refs} = this\n\n    Array\n      .from(this.element.querySelectorAll(\"[data-ref]\"))\n      .forEach(element => {\n        const attribute = element.getAttribute(\"data-ref\")\n        const [, key, arrayKey] = attribute.match(ARRAY_REF_PATTERN)\n\n        if (arrayKey) {\n          // Multiple elements\n          if (!Array.isArray(refs[key])) refs[key] = []\n\n          refs[key].push(element)\n        }\n        else {\n          // Single element\n          refs[key] = element\n        }\n\n        element.removeAttribute(\"data-ref\")\n      })\n  }\n\n  compileTemplate(options = {}) {\n    const {template} = this.constructor\n\n    if (typeof template === \"function\") {\n      this.serializer.innerHTML = template({config: getStore(), ...options})\n    }\n    else {\n      this.serializer.innerHTML = template\n    }\n\n    this.element = this.serializer.firstChild\n    this.updateRefs()\n\n    return this.element\n  }\n\n  insertBefore(sibling, element) {\n    element.parentNode.insertBefore(sibling, element)\n  }\n\n  render() {\n    return this.compileTemplate()\n  }\n\n  // TODO: Check if this used after the app is fleshed out.\n  replaceElement(current, next) {\n    current.parentNode.insertBefore(next, current)\n    current.parentNode.removeChild(current)\n\n    this.updateRefs()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/components/base-component.js","let store = null\n\nexport function initializeStore(instance, spec = {}) {\n  const iframe = document.createElement(\"iframe\")\n  const {appName = \"an app\", beforeContent = \"\", afterContent = \"\", labels = {}} = spec\n\n  store = {\n    appName,\n    instance,\n\n    beforeContent,\n    afterContent,\n\n    iframe: {\n      element: iframe,\n      get document() {\n        return iframe.contentDocument\n      },\n      get window() {\n        return iframe.contentWindow\n      }\n    },\n\n    labels: {\n      done: \"Done\",\n      searchPlaceholder: \"Select or search the type of website you have...\",\n      next: \"Next\",\n      title: appName => `Add ${appName} to your site`,\n      ...labels\n    }\n  }\n\n  return store\n}\n\nexport function getStore() {\n  return store\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./app/lib/store.js","/* eslint-env node, es6 */\nconst BasePage = require(\"./app/components/base-page\").default\n\nmodule.exports = BasePage\n\n\n\n// WEBPACK FOOTER //\n// ./custom-page.js"],"sourceRoot":""}