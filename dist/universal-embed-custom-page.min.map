{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap b65a6ae74b40e7937e14","webpack:///./app/components/page/index.js","webpack:///./app/components/base-component.js","webpack:///./app/custom-page.js","webpack:///./app/store.js"],"names":[],"mappings":"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","file":"universal-embed-custom-page.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"UniversalEmbedCustomPage\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"UniversalEmbedCustomPage\"] = factory();\n\telse\n\t\troot[\"UniversalEmbedCustomPage\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmory imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmory exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tObject.defineProperty(exports, name, {\n \t\t\tconfigurable: false,\n \t\t\tenumerable: true,\n \t\t\tget: getter\n \t\t});\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b65a6ae74b40e7937e14","import BaseComponent from \"components/base-component\"\n\nexport default class BasePage extends BaseComponent {\n  static extend = function extend({fallback = false, id, label, template = \"\", templateVars = {}}) {\n    return class CustomPage extends BasePage {\n      static fallback = fallback;\n      static id = id;\n      static label = label;\n      static template = template;\n      static templateVars = templateVars\n    }\n  };\n\n  compileTemplate() {\n    const {id, templateVars} = this.constructor\n\n    BaseComponent.prototype.compileTemplate.call(this, templateVars)\n\n    this.element.setAttribute(\"data-component\", `${id}-page`)\n    this.element.setAttribute(\"data-column\", \"\")\n    this.element.className = \"markdown instructions\" + this.element.className\n\n    return this.element\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/components/page/index.js","import store from \"../store\"\n\n// Ends with brackets e.g. [data-ref=\"foo[]\"]\nconst ARRAY_REF_PATTERN = /([a-zA-Z\\d]*)(\\[?\\]?)/\n\nexport default class BaseComponent {\n  static template = null;\n  static stylesheet = null;\n\n  element = null;\n  refs = {};\n  serializer = document.createElement(\"div\");\n  store = store;\n\n  constructor(spec = {}) {\n    const {stylesheet} = this.constructor\n\n    const {document: iframeDocument} = store.iframe\n\n    Object.assign(this, spec)\n\n    if (stylesheet && !this.constructor.style) {\n      const style = this.constructor.style = iframeDocument.createElement(\"style\")\n\n      style.innerHTML = stylesheet\n      iframeDocument.head.appendChild(style)\n    }\n  }\n\n  autofocus() {\n    const focusElement = this.element.querySelector(\"[autofocus]\")\n\n    if (focusElement) focusElement.focus()\n  }\n\n  // NOTE: Calling `updateRefs` multiple times from different tree depths may\n  // allow parents to inherit a grandchild.\n  updateRefs() {\n    const {refs} = this\n\n    Array\n      .from(this.element.querySelectorAll(\"[data-ref]\"))\n      .forEach(element => {\n        const attribute = element.getAttribute(\"data-ref\")\n        const [, key, arrayKey] = attribute.match(ARRAY_REF_PATTERN)\n\n        if (arrayKey) {\n          // Multiple elements\n          if (!Array.isArray(refs[key])) refs[key] = []\n\n          refs[key].push(element)\n        }\n        else {\n          // Single element\n          refs[key] = element\n        }\n\n        element.removeAttribute(\"data-ref\")\n      })\n  }\n\n  compileTemplate(options = {}) {\n    const {template} = this.constructor\n\n    if (typeof template === \"function\") {\n      this.serializer.innerHTML = template({config: store, ...options})\n    }\n    else {\n      this.serializer.innerHTML = template\n    }\n\n    this.element = this.serializer.firstChild\n    this.updateRefs()\n\n    return this.element\n  }\n\n  insertBefore(sibling, element) {\n    element.parentNode.insertBefore(sibling, element)\n  }\n\n  render() {\n    return this.compileTemplate()\n  }\n\n  // TODO: Check if this used after the app is fleshed out.\n  replaceElement(current, next) {\n    current.parentNode.insertBefore(next, current)\n    current.parentNode.removeChild(current)\n\n    this.updateRefs()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/components/base-component.js","/* eslint-env node, es6 */\nconst Page = require(\"components/page\").default\n\nmodule.exports = Page\n\n\n\n// WEBPACK FOOTER //\n// ./app/custom-page.js","const iframe = document.createElement(\"iframe\")\n\nexport default {\n  appName: \"Drift Chat\",\n  siteId: \"Icc0-PIkXF\",\n\n  selectedId: \"\",\n  page: \"home\",\n\n  iframe: {\n    element: iframe,\n    get document() {\n      return iframe.contentDocument\n    },\n    get window() {\n      return iframe.contentWindow\n    }\n  },\n\n  labels: {\n    done: \"Done\",\n    searchPlaceholder: \"Select or search the type of website you have...\",\n    next: \"Next\",\n    title: appName => `Add ${appName} to your site`\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/store.js"],"sourceRoot":""}