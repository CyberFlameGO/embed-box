@import "../shared"

@import "../styl/code-syntax-highlighting"
@import "../styl/colors"
@import "../styl/fonts"
@import "../styl/font-smoothing"
@import "../styl/media-query-variables"
@import "../styl/link-underlines"
@import "../styl/inline-svg"

embedBoxDesktopMinWidth = 1080px
embedBoxExtraLargeDesktopMinWidth = 1800px
embedBoxDesktopMinWidthQuery = "(min-width: " + embedBoxDesktopMinWidth + ")"
embedBoxExtraLargeDesktopMinWidthQuery = "(min-width: " + embedBoxExtraLargeDesktopMinWidth + ")"
embedBoxMobileMaxWidthQuery = "(max-width: " + (embedBoxDesktopMinWidth - 1px) + ")"

siteDocsBackgroundColor = #1e1e1e
siteDocsColor = #e2e2de
siteDocsLinkColor = #e6db74

siteDocsTopBuffer = 3rem

html
  background siteDocsBackgroundColor

.slide.no-js-info
  background warnBackgroundColor
  color warnColor
  display flex

.slide
  align-items center
  flex-flow column nowrap
  justify-content center
  padding-top 8em
  padding-bottom @padding-top
  position relative
  line-height 1.5
  background #fff

  @media mobileMaxWidthQuery
    padding-top 4em
    padding-bottom @padding-top

  &.padded
    padding-left 3em
    padding-right @padding-left

    @media mobileMaxWidthQuery
      padding-left 2em
      padding-right @padding-left

    @media iPhoneMaxWidthQuery
      padding-left 1.5em
      padding-right @padding-left

  p, ul, ol, dl
    font-size 1.125em

    ul, ol, dl
      font-size 1em

    @media mobileMaxWidthQuery
      font-size 1em

  .headline-with-anchor
    display block

    > a
      outline none
      color currentColor
      display inline-block
      position relative
      text-decoration none

      &:before
        content "#"
        position absolute
        display inline-block
        right 100%
        padding-right .2em
        opacity .1
        transition opacity .1s ease-in-out

      &:hover:before
        opacity .8

    & > a
      // puts space above anchor when navigating by hash to it
      margin-top -1 * siteDocsTopBuffer
      padding-top siteDocsTopBuffer

    + .headline-with-anchor > a
      margin-top -1.5rem
      padding-top 1.5rem

  .figure.frame-container
    position relative
    z-index 1

    .placeholder, .barrier
      bottom 0
      left 0
      position absolute
      right 0
      top 0

    .placeholder
      align-items center
      justify-content center
      opacity .6
      z-index -1

      .loading-dots
        margin -.5em 0 0 -1.5em

    .barrier
      background-image url(./assets/dotted.png)
      background-repeat repeat
      background-size 2px
      cursor pointer
      opacity 0
      transition opacity 200ms ease-in-out

      &:hover
        opacity .3

    iframe
      border 0
      margin 0
      height 100%
      width 100%

  &.full
    min-height 100vh

.slide.share-slide
  padding-top 0

  .share
    display block
    width 15em
    white-space nowrap
    text-align center
    max-width 100%

    .share-title
      display block
      font-size .9em
      text-transform uppercase
      letter-spacing .1em
      text-indent .1em

    .share-icons
      display block
      font-size 0

    a.share-icon
      display inline-block
      font-size 1rem
      width 4em
      height 4em
      padding 1em
      color currentColor

      &:hover svg
        fill currentColor

.slide.hero
  flex-flow row
  position relative
  padding-bottom 0 !important
  z-index 1

  // Fix small browser render gap glitch
  @media mobileMaxWidthQuery
    + .slide
      margin-top -1px

  @media embedBoxMobileMaxWidthQuery
    display block

  .figure
    border-radius .5em
    width 32em
    max-width 100%
    position relative
    overflow hidden

    &:after
      pointer-events none
      display block
      content ""
      position absolute
      top 0
      right 0
      bottom 0
      left 0
      border 1px solid lightLineGrayRGBA
      border-radius .5em

    @media embedBoxMobileMaxWidthQuery
      display block
      height calc(100vh - 10em)
      max-height 31em
      margin 0 auto

    @media embedBoxDesktopMinWidthQuery
      flex 0 1 auto
      height 32em
      margin 0 0 0 4em

    @media largeDesktopMinWidthQuery
      margin-right -2em

  .content
    width 20em
    max-width 100%

    @media embedBoxMobileMaxWidthQuery
      display block
      margin 0 auto 2em
      text-align center

    @media embedBoxDesktopMinWidthQuery
      flex 0 1 auto

  h1.logo-text
    font-size 3.2em
    font-weight bold
    margin 0 0 .25em

    @media iPhoneMaxWidthQuery
      font-size 2em

  p
    display block
    font-size 1.3em
    width 100%
    margin 0 auto 1em

  ul.nav
    display block
    list-style none
    font-size 1.3em
    width 100%
    margin 0
    padding 0

    li
      display block
      list-style none
      margin 0 0 .5em

    a.more
      font-weight 500
      padding .5em 0
      text-decoration none
      color brandBlue

      &:hover
        color darken(brandBlue, 18%)

.slide.features
  div
    display block

  ul.features-list
    antialiasedFonts()
    font-family sansSerifFonts
    list-style none
    margin 0
    max-width 100%
    padding 0
    font-size 1em
    width centeredPageWidth

    > li
      align-items center
      justify-content space-between
      display flex
      position relative

      &:not(:last-child)
        margin-bottom 4em

      .content
        flex 0 1 auto

        h3
          font-size 1.17em

        p
          color #808080
          letter-spacing .0125em

          &:last-child
            margin-bottom 0

      .image
        display block
        flex 0 1 auto

        img
          max-width 100%

          @media (min-width 2000px)
            max-width 2000px

      @media desktopMinWidthQuery
        &:not(:last-child)
          margin-bottom 8em

        .content, .image
          width 44%

        .content
          h3
            margin-top 0
            font-size 1.7em
            margin-bottom .5em
            font-weight 600

          p
            font-size 1.125em
            margin 0 0 .7em

        &:nth-child(even)
          flex-direction row-reverse

          .image
            direction rtl

      @media mobileMaxWidthQuery
        flex-flow column

        &:not(:last-child)
          margin-bottom 4em

          &:before
            background lighterLineGrayRGBA
            content ""
            display block
            height .0625em
            margin-top 2em
            pointer-events none
            position absolute
            top 100%
            width 100%

        .content, .image
          width auto

        .content
          margin-bottom 2em

.slide.docs
  gutterWidth = 3em
  navWidth = 10em
  demoWidth = calc(2em + 30vw)
  demoPlusGutterWidth = calc(2em + 30vw + 3em)
  largeDemoWidth = 34em

  antialiasedFonts()
  background siteDocsBackgroundColor
  color siteDocsColor
  display flex
  max-width 100%
  padding-top 5em
  position relative

  .wrapper
    display flex
    flex 1 0 auto
    position relative
    width 86em
    max-width 100%
    padding 0 demoPlusGutterWidth 0 (gutterWidth + navWidth)

    @media embedBoxExtraLargeDesktopMinWidthQuery
      padding-right largeDemoWidth + gutterWidth

    @media embedBoxMobileMaxWidthQuery
      flex-flow column
      padding-left 0
      padding-right 0

  .demo-wrapper
    display block

    @media embedBoxDesktopMinWidthQuery
      bottom 0
      right 0
      position absolute
      top 0
      width demoWidth

      @media embedBoxExtraLargeDesktopMinWidthQuery
        width largeDemoWidth

      .sticky
        display block
        padding-top siteDocsTopBuffer
        position sticky
        top 0

  .figure.embedbox-figure
    display block
    overflow hidden

    iframe
      width 100%
      height 32em
      max-height 100%

    @media embedBoxDesktopMinWidthQuery
      height 32em
      max-height 90vh
      min-height 20em

      iframe
        width 100%
        height 100%

  .docs-nav, .docs-content
    @media embedBoxMobileMaxWidthQuery
      width 40em
      margin 0 auto
      max-width 100%

  .docs-nav
    display block

    @media embedBoxDesktopMinWidthQuery
      bottom 0
      left 0
      position absolute
      top 0
      width navWidth

      .sticky
        display block
        padding-top siteDocsTopBuffer
        position sticky
        top 0

    @media embedBoxMobileMaxWidthQuery
      padding-top 0

    h1
      margin-top 0
      font-size 1.5em

      @media embedBoxDesktopMinWidthQuery
        font-size 1.6em

    ul.table-of-contents
      display block
      color siteDocsLinkColor
      margin 0
      list-style none

      @media embedBoxMobileMaxWidthQuery
        margin-bottom 2em

      @media embedBoxDesktopMinWidthQuery
        padding-left 0

        ul
          padding-left 1.5em
          list-style none

      ul
        margin-top 0
        margin-bottom 0

        > li
          line-height 1.65

      > li
        margin-bottom .75em

      a
        linkUnderlines siteDocsBackgroundColor, siteDocsLinkColor
        overflow ellipsis

        &:not(:hover)
          background-image none
          text-shadow none

  .docs-content
    display block
    flex 1 1 auto
    position relative

    @media embedBoxDesktopMinWidthQuery
      padding-top siteDocsTopBuffer
      width 100%

    > *:first-child
      margin-top 0

    > *:last-child
      margin-bottom 0

    pre, code
      font-family monospaceFonts

    *:not(pre) > code
      font-size .72em
      padding .1875em .5em .125em
      margin 0 .125em
      background #2b2b2b
      white-space nowrap

    h2
      margin-top 4.5rem
      font-size 1.5em

      @media embedBoxDesktopMinWidthQuery
        font-size 1.6em

      @media mobileMaxWidthQuery
        margin-top 3.5rem

      @media iPhoneMaxWidthQuery
        margin-top 2.5rem

    h3
      @media embedBoxDesktopMinWidthQuery
        font-size 1.125em

    *:not(h2) + h3
      margin-top 3.5rem
      margin-bottom 0

      @media mobileMaxWidthQuery
        margin-top 2.5rem

    a[href]:not(.without-underline)
      linkUnderlines siteDocsBackgroundColor, siteDocsLinkColor

    *:not(h2):not(h3) > a.without-underline
      color siteDocsLinkColor
      text-decoration none

.slide.made-by
  antialiasedFonts()
  background siteDocsBackgroundColor
  color siteDocsColor
  padding-top 0 !important

  .label
    font-size .9em
    font-weight 100
    text-transform uppercase
    letter-spacing .1em
    text-indent @letter-spacing
    margin-bottom 1em
    opacity .5

  .logo-link
    display block
    width 9em
    height 4em
    color siteDocsLinkColor

    > svg
      height 100%
      width 100%

      path
        fill currentColor

button[data-run]
  playSVG = SVG.play

  align-items center
  color #171717
  display flex
  flex 0 0 auto
  font-weight 500
  margin 0
  padding .3em .75em .3em 1.85em
  background brandYellow
  background-image url(playSVG)
  background-repeat no-repeat
  background-position .7em center
  background-size .8em .8em

  &:hover
    background-color darken(brandYellow, 7%)

  & + button[data-run]
    margin-left 1em

.code-example
  antialiasedFonts()
  background #232323
  flex-flow row wrap
  width 100%
  position relative
  margin-bottom 2.5em

  button[data-run]
    margin-top 1.5em
    margin-left 1.5em

  @media embedBoxMobileMaxWidthQuery
    button[data-run="inline"]
      display none

  code, pre
    display block

  pre
    color siteDocsColor
    flex 1 0 auto
    line-height 1.4
    margin 0
    overflow-x auto
    padding 1.5em
    -webkit-overflow-scrolling touch
    white-space pre
    width 100%
    word-wrap normal

    > code
      font-size .9em
      padding 0
      white-space inherit
