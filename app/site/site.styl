@import nib

@import "../shared"

@import "../styl/code-syntax-highlighting"
@import "../styl/colors"
@import "../styl/fonts"
@import "../styl/font-smoothing"
@import "../styl/media-query-variables"
@import "../styl/link-underlines"

embedBoxDesktopMinWidth = 1000px
embedBoxDesktopMinWidthQuery = "(min-width: " + embedBoxDesktopMinWidth + ")"
embedBoxMobileMaxWidthQuery = "(max-width: " + (embedBoxDesktopMinWidth - 1px) + ")"

siteDocsBackgroundColor = #1e1e1e
siteDocsColor = #f8f8f2
siteDocsLinkColor = #e6db74

html
  background siteDocsBackgroundColor

.slide.no-js-info
  background warnBackgroundColor
  color warnColor
  display flex

.slide
  align-items center
  flex-flow column nowrap
  justify-content center
  padding-top 8em
  padding-bottom @padding-top
  position relative
  line-height 1.5
  background #fff

  @media mobileMaxWidthQuery
    padding-top 4em
    padding-bottom @padding-top

  &.padded
    padding-left 4em
    padding-right @padding-left

    @media mobileMaxWidthQuery
      padding-left 2em
      padding-right @padding-left

    @media iPhoneMaxWidthQuery
      padding-left 1.5em
      padding-right @padding-left

  p
    font-size 1.25em

    @media mobileMaxWidthQuery
      font-size 1em

  .hidden-anchor
    left 0
    margin 0
    opacity 0
    padding 0
    pointer-events none
    position absolute
    top 0
    z-index -1

  .headline-with-anchor
    display block

    > a
      outline none
      color currentColor
      display inline-block
      position relative
      text-decoration none

      &::before
        content "#"
        position absolute
        display inline-block
        right 100%
        padding-right .2em
        opacity .1
        transition opacity .1s ease-in-out

      &:hover::before
        opacity .8

    & > a
      // puts space above anchor when navigating by hash to it
      margin-top -2.5em
      padding-top 2.5em

    + .headline-with-anchor > a
      margin-top -.5em
      padding-top .5em

  .figure.frame-container
    position relative
    z-index 1

    .placeholder, .barrier
      bottom 0
      left 0
      position absolute
      right 0
      top 0

    .placeholder
      align-items center
      justify-content center
      opacity .6
      z-index -1

    .barrier
      background-image url(./assets/dotted.png)
      background-repeat repeat
      background-size 2px
      cursor pointer
      opacity 0
      transition opacity 200ms ease-in-out

      &:hover
        opacity .3

    iframe
      border 0
      margin 0
      height 100%
      width 100%

  &.full
    min-height 100vh

.slide.hero
  flex-flow row
  position relative
  padding-bottom 0 !important
  z-index 1

  // Fix small browser render gap glitch
  @media mobileMaxWidthQuery
    + .slide
      margin-top -1px

  @media embedBoxMobileMaxWidthQuery
    display block

  .figure
    border-radius .5em
    width 32em
    max-width 100%
    position relative
    overflow hidden

    &:after
      pointer-events none
      display block
      content ""
      position absolute
      top 0
      right 0
      bottom 0
      left 0
      border 1px solid lightLineGrayRGBA
      border-radius .5em

    @media embedBoxMobileMaxWidthQuery
      display block
      height calc(100vh - 10em)
      max-height 31em
      margin 0 auto

    @media embedBoxDesktopMinWidthQuery
      flex 0 1 auto
      height 32em
      margin 0 0 0 4em

    @media largeDesktopMinWidthQuery
      margin-right -2em

  .content
    width 20em
    max-width 100%

    @media embedBoxMobileMaxWidthQuery
      display block
      margin 0 auto 2em
      text-align center

    @media embedBoxDesktopMinWidthQuery
      flex 0 1 auto

  h1.logo-text
    font-size 3.2em
    font-weight bold
    margin 0 0 .25em

    @media iPhoneMaxWidthQuery
      font-size 2em

  p
    display block
    font-size 1.3em
    width 100%
    margin 0 auto 1em

  ul.nav
    display block
    list-style none
    font-size 1.3em
    width 100%
    margin 0
    padding 0

    li
      display block
      list-style none
      margin 0 0 .5em

    a.more
      font-weight 500
      padding .5em 0
      text-decoration none
      color brandBlue

      &:hover
        color darken(brandBlue, 18%)

.slide.features

  div
    display block

  ul.features-list
    antialiasedFonts()
    font-family sansSerifFonts
    list-style none
    margin 0
    max-width 100%
    padding 0
    width centeredPageWidth

    > li
      align-items center
      justify-content space-between
      display flex
      position relative

      &:not(:last-child)
        margin-bottom 4em

      .content
        flex 0 1 auto

        h3
          font-size 1.17em

        p
          color #808080
          letter-spacing .0125em

          &:last-child
            margin-bottom 0

      .image
        display block
        flex 0 1 auto

        img
          max-width 100%

          @media (min-width 2000px)
            max-width 2000px

      @media desktopMinWidthQuery
        &:not(:last-child)
          margin-bottom 8em

        .content, .image
          width 44%

        .content
          h3
            margin-top 0
            font-size 1.7em
            margin-bottom .5em
            font-weight 600

          p
            font-size 1.125em
            margin 0 0 .7em

        &:nth-child(even)
          flex-direction row-reverse

          .image
            direction rtl

      @media mobileMaxWidthQuery
        flex-flow column

        &:not(:last-child)
          margin-bottom 4em

          &:before
            background lighterLineGrayRGBA
            content ""
            display block
            height .0625em
            margin-top 2em
            pointer-events none
            position absolute
            top 100%
            width 100%

        .content, .image
          width auto

        .content
          margin-bottom 2em

.slide.table-of-contents
  antialiasedFonts()
  align-items baseline
  background brandBlack
  flex-flow row nowrap
  font-size 1.4em
  justify-content center
  min-height 1em
  padding 1em 3.5em 0
  text-align center

  @media embedBoxMobileMaxWidthQuery
    display none

  a
    color white
    flex 1 1 auto
    opacity .5
    text-decoration none
    transition opacity .1s ease-in-out

    &:hover
      opacity .9

  a + a
    margin-left 1em

.slide.docs
  antialiasedFonts()
  position relative
  background siteDocsBackgroundColor
  color siteDocsColor
  display block
  margin-left auto
  margin-right auto
  max-width 100%
  overflow hidden
  padding-top  4em
  position relative
  width 74em

  > *:first-child
    margin-top 0

  > *:last-child
    margin-bottom 0

  > h1:first-child
    text-align center
    font-size 1em
    text-transform uppercase
    letter-spacing .045em
    text-indent @letter-spacing
    line-height 1
    margin-bottom 3em
    color siteDocsLinkColor

    + h2
      margin-top 0

    @media embedBoxDesktopMinWidthQuery
      display none

  > *:not(.embedbox-figure):not(h1)
    width 50%

    @media embedBoxMobileMaxWidthQuery
      width 100%

  @media embedBoxDesktopMinWidthQuery
    h2
      font-size 1.6em

    h3
      font-size 1.25em

  h2
    margin-top 4.5rem

    @media mobileMaxWidthQuery
      margin-top 3.5rem

    @media iPhoneMaxWidthQuery
      margin-top 2.5rem

  *:not(h2) + h3
    margin-top 3.5rem
    margin-bottom 0

    @media mobileMaxWidthQuery
      margin-top 2.5rem

  a[href]:not(.without-underline)
    linkUnderlines siteDocsBackgroundColor, siteDocsLinkColor

  > .figure.floating-figure
    position absolute
    height 31em
    left 55%
    right 4em
    margin 0

    &[data-layout="fullscreen"]
      background transparent
      bottom 0
      left 0
      position fixed
      right 0
      top 0 !important

    &[data-layout="inline"] .fullscreen-toggle
      display inline-block

    @media embedBoxMobileMaxWidthQuery
      display none

.slide.made-by
  antialiasedFonts()
  background siteDocsBackgroundColor
  color siteDocsColor
  padding-top 0 !important

  .label
    font-size .9em
    font-weight 100
    text-transform uppercase
    letter-spacing .1em
    text-indent @letter-spacing
    margin-bottom 1em
    opacity .5

  .logo-link
    display block
    width 9em
    height 4em
    color siteDocsLinkColor

    > svg
      height 100%
      width 100%

      path
        fill currentColor

button[data-run]
  align-items center
  background brandYellow
  color #171717
  display flex
  flex 0 0 auto
  font-weight 500
  margin 0
  padding 0.3em 1em 0.3em 0.7em

  &:hover
    background darken(brandYellow, 7%)

  & + button[data-run]
    margin-left 1em

  &::before
    content ""
    display inline-block
    width 0
    height 0
    border-style solid
    border-width 0.4em 0 0.4em 0.65em
    margin-right 0.5em
    border-color transparent transparent transparent #000

.code-example
  antialiasedFonts()
  background #232323
  flex-flow row wrap
  max-width 100%
  position relative
  width 700px

  button[data-run]
    margin-top 1.5em
    margin-left 1.5em

  @media mobileMaxWidthQuery
    button[data-run="inline"]
      display none

  code, pre
    display block
    font-family monospaceFonts

  pre
    color #f6f7ee
    flex 1 0 auto
    line-height 1.4
    margin 0
    overflow-x auto
    padding 1.5em
    -webkit-overflow-scrolling touch
    white-space pre
    width 100%
    word-wrap normal

  code
    background lightGrayRGBA
    font-size .9em
    font-style normal
    padding .15625em .3125em
    white-space nowrap

  pre > code
    background transparent
    font-size .9em
    padding 0
    white-space inherit

  & + .code-example
    margin-top 1em
